<div ng-controller="ConnectivityTestingCtrl" ng-init="init()" class="appcontent">

<tabset>
    <tab select="setActiveTab(0)" active="tabs[0]">
        <tab-heading>
            <i class="fa fa-th-list"></i>
            Test Cases
        </tab-heading>
        <div ng-include="'views/connectivity/testcase.html'"></div>
    </tab>
    <tab disabled="disabled()" select="setActiveTab(1)" active="tabs[1]">
        <tab-heading>
            <i class="fa fa-cog"></i>
            Execute Test
        </tab-heading>
        <div ng-include="'views/connectivity/execution.html'"></div>
    </tab>
    <!--<tab  select="setActiveTab(2)" active="tabs[2]">-->
    <!--<tab-heading>-->
    <!--<i class="glyphicon glyphicon-cog"></i>-->
    <!--Log-->
    <!--</tab-heading>-->
    <!--<div ng-include="'views/testing/connectivity/log.html'"></div>-->
    <!--</tab>-->

    <!--<tab select="setActiveTab(3)" active="tabs[3]">-->
    <!--<tab-heading>-->
    <!--<i class="glyphicon glyphicon-help"></i>Testing Instructions-->
    <!--</tab-heading>-->
    <!--<div ng-include="'views/testing/connectivity/instruction.html'"></div>-->
    <!--</tab>-->

</tabset>

<script type="text/ng-template" id="ConnectivitySenderCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Transaction log panel</h3>
    </div>
    <div class="modal-body">
                <textarea class="well" wrap="off"
                          style="overflow: auto; margin-top:23px;font-size: 11px; width: 100%; height: 100%"
                          rows="14" disabled
                          ng-model="logger.content"></textarea>
    </div>
    <div class="modal-footer">
        <button type="button" ng-click="send()" ng-disabled="!isValidConfig() || connecting"
                title="Send" class="btn btn-sm btn-success">
            <i class="fa fa-arrow-right"></i>
            Send  <span ng-show="connecting"><i ng-show="connecting" class="fa fa-spinner"></i> Remaining: {{counter}}s </span>
        </button>

        <button title="Close" type="button" class="pull-right btn btn-sm btn-primary"
                ng-click="close()">
            <i class="fa fa-times"></i>Close
        </button>
    </div>
</script>


<script type="text/ng-template" id="ConnectivityConfigureReceiverCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Receiver Configuration Panel</h3>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="cols-md-10">
                <form name="receiverForm1" novalidate>
                         <div class="form-group" ng-show="testCase.testType !== 'RECEIVER_CONNECTIVITY'">
                            <label>Username</label>
                            <input type="text" class="form-control" ng-model="user.receiverUsername"
                                   placeholder="Username">
                        </div>
                        <div class="form-group" ng-show="testCase.testType !== 'RECEIVER_CONNECTIVITY'">
                            <label>Password</label>
                            <input type="text" class="form-control"
                                   placeholder="Password"
                                   ng-model="user.receiverPassword">
                            <!--<div class="input-group">-->
                            <!---->
                            <!--<span class="input-group-addon">-->
                            <!--<input type="checkbox"-->
                            <!--ng-model="hidePwd">-->
                            <!--</span>-->
                            <!--</div>-->
                        </div>
                        <div class="form-group" ng-show="testCase.testType !== 'RECEIVER_CONNECTIVITY'">
                            <label>FacilityID</label>
                            <input type="text" class="form-control" placeholder="Facility Id"
                                   ng-model="user.receiverFacilityId">
                        </div>
                        <div class="form-group"
                             ng-class="{ 'has-error' : receiverForm1.endpoint.$invalid && !receiverForm1.endpoint.$pristine }">
                            <label>Endpoint</label>
                            <input type="url" name="endpoint" class="form-control" ng-model="user.receiverEndpoint"
                                   placeholder="SUT Endpoint" required>

                            <p ng-show="receiverForm1.endpoint.$invalid && !receiverForm1.endpoint.$pristine"
                               class="help-block">
                                Invalid url. Expected format is {{appInfo.url}}</p>
                        </div>

                     <!--<div ng-show="testCase.testType === 'RECEIVER_CONNECTIVITY'">-->
                        <!--&lt;!&ndash; novalidate prevents HTML5 validation since we will be validating ourselves &ndash;&gt;-->
                        <!--<div class="form-group"-->
                             <!--ng-class="{ 'has-error' : receiverForm1.endpoint.$invalid && !receiverForm1.endpoint.$pristine }">-->
                            <!--<label>Endpoint</label>-->
                            <!--<input type="url" name="endpoint" class="form-control" ng-model="user.receiverEndpoint"-->
                                   <!--placeholder="SUT Endpoint" required>-->

                            <!--<p ng-show="receiverForm1.endpoint.$invalid && !receiverForm1.endpoint.$pristine"-->
                               <!--class="help-block">-->
                                <!--Invalid url. Example is {{appInfo.url}}</p>-->
                        <!--</div>-->
                    <!--</div>-->
                </form>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button ng-click="save()" type="button" ng-disabled="receiverForm1.$invalid"
                title="Save" class="btn btn-xs btn-primary">
            <i class="fa fa-check-circle"></i> Save
        </button>
        <button ng-click="cancel()" type="button"
                title="Cancel" class="btn btn-xs btn-warning">
            <i class="fa fa-times"></i>
            Cancel
        </button>
    </div>
</script>


<script type="text/ng-template" id="ConnectivityReceiverCtrl.html">
    <div class="modal-header">
        <h3 class="modal-title">Receiver Configuration Panel</h3>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-sm-6">
                <div class="page-header"><h3>Assigned Sender Information</h3></div>
                <form name="senderForm" novalidate>
                    <div class="form-group">
                        <label>Assigned Username</label>
                        <input type="text" disabled name="u" class="form-control" ng-model="user.senderUsername">

                        <p class="help-block">This is the username assigned to you to use in your message</p>
                    </div>

                    <div class="form-group">
                        <label>Assigned Password</label>
                        <input type="text" class="form-control" name="p"
                               ng-model="user.senderPassword" disabled>

                        <p class="help-block">This is the password assigned to you to use in your message</p>
                    </div>

                    <div class="form-group">
                        <label>Assigned FacilityID</label>
                        <input type="text" class="form-control" name="facilityId"
                               ng-model="user.senderFacilityID" disabled>

                        <p class="help-block">This is the facilityID assigned to you to use in your message</p>
                    </div>

                    <div class="form-group"
                         ng-class="{'has-error' : senderForm.endpoint.$invalid && !senderForm.endpoint.$pristine }">
                        <label>System Endpoint</label>
                        <input type="url" name="endpoint" class="form-control" ng-model="endpoint.value"
                               placeholder="SUT Endpoint" required disabled>

                        <p ng-show="senderForm.endpoint.$invalid && !senderForm.endpoint.$pristine" class="help-block">
                            Sorry, an
                            error occured. Please refresh your page</p>
                    </div>

                    <div class="form-group"
                         ng-class="{'has-error' : senderForm.endpoint.$invalid && !senderForm.endpoint.$pristine }">
                        <label>System WSDL</label>
                        <a ng-href="{{endpoint.value}}.wsdl" class="form-control" target="_blank">{{endpoint.value}}.wsdl</a>

                        <p ng-show="senderForm.endpoint.$invalid && !senderForm.endpoint.$pristine" class="help-block">
                            Sorry, an
                            error occured. Please refresh your page</p>
                    </div>

                    <button type="button" ng-click="start()" ng-disabled="senderForm.$invalid || connecting"
                            title="Start listening"
                            class="btn btn-xs btn-success">
                        <i class="fa fa-play"></i>
                        Start Listening
                    </button>

                    <button type="button" ng-disabled="!connecting" ng-click="stop()"
                            class="btn btn-xs btn-warning"><i class="fa fa-stop"></i>
                        Stop Listening
                    </button>
                    <div>
                        <small><em>Time elapsed (seconds)</em></small>
                        <progressbar type="info" max="counterMax" value="counter"><span
                                style="color:white; white-space:nowrap;">{{counter}} / {{counterMax}}</span>
                        </progressbar>
                    </div>
                </form>
            </div>
            <div class="col-sm-6">
                <div class="page-header">
                    <h3>Log
                        <button title="Clear" type="button" class="pull-right btn btn-xs btn-default"
                                ng-click="logger.clear()">
                            <span class="glyphicon glyphicon-remove"></span>
                        </button>
                    </h3>
                </div>
                <textarea class="well" wrap="off"
                          style="overflow: auto; margin-top:23px;font-size: 11px; width: 100%; height: 100%" rows="18"
                          disabled
                          ng-model="logger.content"></textarea>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button title="Close" type="button" class="pull-right btn btn-sm btn-primary"
                ng-click="close()">
            <i class="fa fa-times"></i>Close
        </button>
    </div>
</script>


</div>

