<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:util="http://www.springframework.org/schema/util"
	xmlns:context="http://www.springframework.org/schema/context"
	xmlns:sws="http://www.springframework.org/schema/web-services" xmlns:p="http://www.springframework.org/schema/p"
	xmlns:oxm="http://www.springframework.org/schema/oxm"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-4.1.xsd
http://www.springframework.org/schema/context 
http://www.springframework.org/schema/context/spring-context-4.1.xsd
http://www.springframework.org/schema/util
http://www.springframework.org/schema/util/spring-util-4.1.xsd
http://www.springframework.org/schema/web-services
http://www.springframework.org/schema/web-services/web-services-2.0.xsd
http://www.springframework.org/schema/oxm http://www.springframework.org/schema/oxm/spring-oxm-1.5.xsd
">



	<context:component-scan base-package="gov.nist.healthcare.tools.hl7.v2.iz.tool.ws" />

	<bean id="messageFactory" class="org.springframework.ws.soap.saaj.SaajSoapMessageFactory">
		<property name="soapVersion">
			<util:constant static-field="org.springframework.ws.soap.SoapVersion.SOAP_12" />
		</property>
	</bean>

	<sws:static-wsdl id="iisService" location="classpath:/ws/iisService.wsdl" />

	<!-- <sws:interceptors>

		<sws:payloadRoot namespaceUri="urn:cdc:iisb:2011" localPart="submitSingleMessage">
    			<bean class="gov.nist.healthcare.tools.hl7.v2.iz.tool.ws.server.interceptor.SubmitSingleMessageInterceptor">
     			</bean>
  		</sws:payloadRoot> 
  		
  		<bean
			class="org.springframework.ws.soap.server.endpoint.interceptor.SoapEnvelopeLoggingInterceptor">
			 <property name="logRequest" value="true"></property>
        	<property name="logResponse" value="true"></property>
		</bean>
  
		
	</sws:interceptors>
 -->
 	<bean id="validatingInterceptor"
		class="org.springframework.ws.soap.server.endpoint.interceptor.PayloadValidatingInterceptor">
		<property name="schema" value="classpath:/ws/cdc.xsd" />
		<property name="validateRequest" value="true" />
		<property name="validateResponse" value="true" />
	</bean>  

	<bean id="exceptionResolver"
		class="gov.nist.healthcare.tools.hl7.v2.iz.tool.ws.server.SoapFaultDetailsDefinitionExceptionResolver">
		<property name="defaultFault" value="SERVER" />
	 	<property name="exceptionMappings">
	 		<map>
	 			<entry key="org.springframework.oxm.ValidationFailureException" value="CLIENT,Invalid request"/>
	 			<entry key="gov.nist.healthcare.tools.hl7.v2.iz.tool.ws.server.exception.MessageTooLargeException" value="SENDER"/>
	 			<entry key="java.lang.UnsupportedOperationException" value="SENDER" />
	 			<entry key="java.lang.SecurityException" value="SENDER" />
	 			<entry key="gov.nist.healthcare.tools.core.transport.TransportServerException" value="SENDER"/>
	 		</map>
		</property> 
	</bean>



	<bean id="poxMessageFactory" class="org.springframework.ws.pox.dom.DomPoxMessageFactory">
		<property name="contentType" value="application/soap+xml" />
	</bean>
 

	<bean id="messageSender"
		class="org.springframework.ws.transport.http.CommonsHttpMessageSender">
	</bean>
<!-- 
	<bean id="webServiceClient" class="gov.nist.healthcare.tools.hl7.v2.iz.tool.ws.client.WebServiceClient">
  		<constructor-arg name="webServiceTemplate" ref="webServiceTemplate" />
  	</bean>
  	 -->
   
 
 	
</beans>